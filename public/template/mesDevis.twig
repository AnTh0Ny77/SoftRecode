{% extends 'layoutMain.twig' %}
 
 
     {% block main %}
     <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
        <h1 class="h2">Mes Devis <i class="fal fa-file-search"></i></h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <div class="btn-group mr-2">
          </div>
        </div>
      </div>
       <!-- 1ere ligne -->
       <div class="d-flex flex-wrap flex-row justify-content-start">


        <!-- Modal -->
        <div class="modal fade" id="statusModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Status <i class="fas fa-tasks"></i></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <form action="mesDevis" method="POST">
              <div class="modal-body">
                <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">

                    {% for status in listOfStatus %}
                    {% if   status.keyword__lib != 'Commande'%}
                    <div class="form-check form-check-inline">
                      <input class="form-check-input statusRadio" name="statusRadio" type="radio" value="{{ status.keyword__value}}" >
                      <label class="form-check-label" for="defaultCheck1">
                        {{ status.keyword__lib}}
                      </label>
                    </div>
                    {% endif %}
                    {% endfor %}
                    <input type="hidden" name="ValiderDevis" id="ValiderDevis" value="">
                  </div>
              </div>
              <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Valider</button>
              </form>
              </div>
            </div>
          </div>
        </div>



        <!--carte liste de Devis -->
      <div class="col-8">
        <div class="card shadow mb-4">
          <!-- Card Header - -->
          <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
            <h6 class="m-0 font-weight-bold text-primary"></h6>
           
              <div class="d-flex flex-row flex-wrap justify-content-center px-2 ml-5">
                <div class="py-1 col-6">
                  <button type="button" class="btn btn-success btn-block  btn-sm  multiButton"  data-toggle="modal" data-target="#statusModal" disabled>Statuer</button>
                </div>
                <form class="py-1  col-6" method="POST" action="voirDevis" target="_blank">
                  <input type="hidden" name="VoirDevis" id="VoirDevis" value="">
                <button type="submit" class="btn btn-secondary btn-block  btn-sm  multiButton" disabled>PDF</button>
                 </form>
                <form class="py-1 col-6" action="nouveauDevis" method="POST">
                  <input type="hidden" name="ModifierDevis" id="ModifierDevis" value="">
                <button type="submit" class="btn btn-primary btn-sm  btn-block  multiButton" disabled>Modifier</button>
                </form>
                <form class="py-1 col-6" action="nouveauDevis" method="POST">
                  <input type="hidden" name="DupliquerDevis" id="DupliquerDevis" value="">
                <button type="submit" class="btn btn-warning btn-block btn-sm  multiButton" disabled>Dupliquer</button>
                </form>
              
          
            </div>
            <div class="dropdown no-arrow">
              <form class="form-inline">
                <input class="form-control mr-2" type="search" placeholder="Recherche" aria-label="Search">
                <button class="btn btn-outline-primary my-2 " type="submit"><i class="fal fa-bullseye-arrow"></i></button>
              </form>
              
              <div class="d-flex flex-row justify-content-around" >
                <div>
                  <a class="btn btn btn-sm btn-info" href="nouveauDevis">Nouveau Devis</a>
                </div>
                {% if user.user__devis_acces >= 15 %}
                <div>
                  <form action="mesDevis" method="POST"> 
                      <input type="hidden" value="{{ AllDevis }}" name="MyDevis">
                      <button type="submit" class="btn btn-sm btn-secondary">{{ AllDevis }}</button>
                  </form>
                </div>
                {% endif %}
              </div>
              
            </div>
          </div>
          <!-- Card Body -->
          <div class="card-body">
            <div class="chart-area">
              <table id="MyDevis" class=" display table " style="width:100%"> <thead class="thead-dark"> <tr> <th>Numéro</th> <th>Date</th><th>Editeur</th><th>Client</th><th>Etat</th></tr>
              </thead> 
               <tbody id="DevisBody">
                {% for devis in devisList %}
                <tr class="trClick"><td>{{devis.devis__id}}</td><td>{{ devis.devis__date_crea}}</td><td>{{ devis.log_nec  }}</td><td>{{ devis.client__societe ~ " (" ~ devis.client__id ~ ")" }} <br>{{ devis.client__cp ~ " " ~ " " ~  devis.client__ville}}</td><td>{{ devis.keyword__lib}}</td></tr>
                {% endfor %}
               </tbody>
             </table>
           </div>
           
          </div>
         
        </div>
      </div>

        <!--carte option -->
        <div class="col-4">
          <div class="card shadow mb-4">
            <!-- Card Header - -->
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
              <h6 class="m-0 font-weight-bold text-primary">Infos <i class="fal fa-info"></i></h6>
              <div class="dropdown no-arrow">
              </div>
            </div>
            <!-- Card Body -->
            <div class="card-body">
              <div class="card text-center shadow text-white bg-dark">
                <div class="card-header">
                  <h5 >ID du Devis: <strong class="text-primary" id="AjaxId">Aucun</strong></h5>
                </div>
                <div class="card-body ">
                  <h6 class="card-title">Société : <strong class="text-primary" id="AjaxSociete">Aucun devis selectionné </strong></h6>
                  <ul class="list-group text-justify shadow ">
                    <li class="list-group-item text-white bg-dark ">Contact: <strong class="text-primary" id="AjaxContact">...  </strong></li>
                    <li class="list-group-item text-white bg-dark ">Livraison: <strong class="text-primary" id="AjaxLivraison">... </strong> </li>
                    <li class="list-group-item text-white bg-dark ">Etat: <strong class="text-primary" id="AjaxEtat" >... </strong> </li>
                    <li class="list-group-item text-white bg-dark ">Frais de port: <strong class="text-primary" id="AjaxPort">...</strong> </li>
                    <li class="list-group-item text-white bg-dark ">
                      <ul class="list-group text-justify shadow " id="listOfAjax">

                      </ul>



                    </li>

                  </ul>
                </div>
                <div class="card-footer text-muted">
                  <strong>...</strong>
                </div>
              </div>
          </div>
          
        </div>


      </div>
    </main>
     {% endblock %}
     
    
  