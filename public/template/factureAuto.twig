{% extends 'layoutMain.twig' %}


  {% block style %}
<link href="vendor/fontawesome/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="public/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="public/datatable/datatables.min.css" >
<link rel="stylesheet" href="public/bootstrap/css/bootstrap-select.min.css">
<link rel="stylesheet" type="text/css" href="public/datatable/datatables.min.css" >
<link rel="stylesheet" href="public/css/dashboard.css">
  {% endblock %}
 
 
     {% block main %}
     <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
        <h1 class="h2">Facturation Automatique des abonnemennts <i class="fas fa-scroll"></i></h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <div class="btn-group mr-2">
          </div>
        </div>
      </div>
       <!-- 1ere ligne -->
       <div class="d-flex flex-wrap flex-row justify-content-start">
        <input type="hidden" name="idUtilisateur" id="idUtilisateur" value="{{user.log_nec}}">
        <input type="hidden" id="minFact" value="{{minFact.cmd__id_facture}}">
    <!--carte liste de Devis -->
      <div class="col-12">
        <div class="card shadow mb-4">
          <!-- Card Header - -->
         
          <!-- Card Body -->
          <div class="card-body">
            <div class="chart-area">
                {% for abn in ABNList %}
                    {% if abn.array != null  %}
                   
                    <table class="table table-bordered">
                      <thead>
                        <tr>
                          <th scope="col" style="width: 25%;">Client</th>
                          <th scope="col" style="width: 25%;">Commande/Prestation</th>
                          <th scope="col"style="width: 25%;">Commentaire</th>
                          <th scope="col" style="width: 25%;">Prix TRIM.HT</th>
                         
                        </tr>
                      </thead>
                      <tbody>
                       <tr>
                          <td scope="col"><b>{{abn.client.client__societe ~ '(' ~ abn.client.client__id  ~ ')'}}<br>
                          {{ abn.client.client__adr1 }}<br>
                          {{ abn.client.client__cp  ~ " " ~ abn.client.client__ville}}</b><br>
                          <p class="text-primary">{{abn.nbMachine}} machine(s) actives</p>
                          </td>
                          <td scope="col">N° : <b>{{ abn.ab__cmd__id}}</b><br>{{abn.prestaLib}}</td>
                          <td scope="col">
                          {% if abn.ab__note %}
                          {{ abn.ab__note|raw}}
                          {% else %}
                          pas de commentaire
                          {% endif %}
                          </td>
                            <td>
                                <p class="text-right">
                                Prix Total Trimestre : <b>{{abn.total}} € H.T</b>
                                </p>
                            </td>
                         
                        </tr>
                       
                      </tbody>
                  </table>

              {% endif %}
                {% endfor %}
            </div>  
            
          </div>
          <div class="modal-footer">
            <form action="printABN" method="POST">
              <input type="hidden" name="dateDebut" value="{{dateDebut}}">
              <input type="hidden" name="dateFin" value="{{dateFin}}">
              <input type="hidden" value='{{arrayfacturable}}' name="hiddenABN">
              <button class="btn btn-success">Facturer</button>
            </form>
          </div>
        </div>
      </div>
      
      
    </div>

    </main>
     {% endblock %}
     
    
     {% block script %}
     <!-- Optional JavaScript -->

<!-- jQuery first, then Bootstrap JS -->
<script  type="text/javascript" src="public/datatable/datatables.min.js"></script>
<script  type="text/javascript" src="public/bootstrap/js/bootstrap.bundle.min.js"></script>
<script  type="text/javascript" src="public/bootstrap/js/bootstrap-select.min.js"></script>




     {% endblock %}